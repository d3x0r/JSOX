"use strict";const _JSON=JSON;if(void 0===exports)var exports={};const JSOX=exports||{};exports.JSOX=JSOX,JSOX.version="1.2.122",function(){const e="function"==typeof BigInt,t=["ab","u8","cu8","s8","u16","s16","u32","s32","u64","s64","f32","f64"];let n=null,r=null;const i=[ArrayBuffer,Uint8Array,Uint8ClampedArray,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,null,null,Float32Array,Float64Array],a=29,s=30,l=31,o={true:!0,false:!1,null:null,NaN:NaN,Infinity:1/0,undefined:void 0};class c extends Date{constructor(e,t){super(e),this.t=t||0}}JSOX.i=c;const f=[];function u(){let e=f.pop();return e||(e={context:0,l:null,o:null,u:0,h:-1,valueType:0,elements:null}),e}function b(e){f.push(e)}JSOX.p=function(){};const h=[];function p(e){h.push(e)}JSOX.escape=function(e){let t,n="";if(!e)return e;for(t=0;t<e.length;t++)'"'!=e[t]&&"\\"!=e[t]&&"`"!=e[t]&&"'"!=e[t]||(n+="\\"),n+=e[t];return n};let d=new WeakMap,g=new Map,k=new Map,w=[];JSOX.reset=function(){d=new WeakMap,g=new Map,k=new Map,w=[]},JSOX.begin=function(n,r){const o={name:null,k:0,string:"",contains:null,className:null},f={line:1,m:1};let d,g,w=0,m=new Map,y=0,O=!0,S=!1,x=!1,j=null,E=null,N={O:null,S:null,j:null,push(e){let t=this.j;t?(this.j=t.next,t.node=e,t.next=null,t.v=this.S):t={node:e,next:null,v:this.S},this.S?this.S.next=t:this.O=t,this.S=t,this.length++},pop(){let e=this.S;return(this.S=e.v)||(this.O=null),e.next=this.j,this.S&&(this.S.next=null),e.next||(e.O=null),this.j=e,this.length--,e.node},length:0},J=[],X={},I=null,A=null,M=0,$=-1,T=0,B=0,C=!1,U=!1,D=!1,F=!1,P=!1,_={O:null,S:null,j:null,push(e){let t=this.j;t?(this.j=t.next,t.node=e,t.next=null,t.v=this.S):t={node:e,next:null,v:this.S},this.S?this.S.next=t:this.O=t,this.S=t},shift(){let e=this.O;return e?((this.O=e.next)||(this.S=null),e.next=this.j,this.j=e,e.node):null},unshift(e){let t=this.j;this.j=t.next,t.node=e,t.next=this.O,t.v=null,this.O||(this.S=t),this.O=t}},q=null,R=!1,W=!1,H=!1,G=!1,L=!1,V=!1,K=!1,Q=0,Y=0,Z=!1,z=!1,ee=!1;function te(e){throw new Error(`${e} at ${w} [${f.line}:${f.m}]`)}return{N(e,t,n){if(m.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t||(t=function(){}),t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");m.set(e,{J:t.prototype.constructor,X:n})},I(e,t){throw new Error("registerFromJSOX is deprecated, please update to use fromJSOX instead:"+e+t.toString())},A(){0!==B&&(1===B&&te("Comment began at end of document"),3===B&&te("Open comment '/*' is missing close at end of document"),4===B&&te("Incomplete '/* *' close at end of document")),R&&te("Incomplete string")},value(){this.A();let e=j;return j=void 0,e},reset(){y=0,O=!0,_.S&&(_.S.next=_.save),_.save=_.O,_.O=_.S=null,N.S&&(N.S.next=N.save),N.length=0,N.save=_.O,N.O=N.S=null,g=void 0,T=0,J=[],X={},I=null,A=null,M=0,o.k=0,o.name=null,o.string="",o.className=null,f.line=1,f.m=1,x=!1,B=0,Z=!1,R=!1,H=!1,G=!1,z=!1},M(e,t){X[e]=t},write(e){let t;if("string"!=typeof e&&void 0!==e&&(e=String(e)),!O)throw new Error("Parser is still in an error state, please reset before resuming");for(t=this.$(e,!1);t>0&&("function"==typeof r&&function e(t,n){let i,a,s=t[n];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a=e(s,i),void 0!==a?s[i]=a:delete s[i]);return r.call(t,n,s)}({T:j},""),j=n(j),!(t<2));t=this.$());},parse(e,t){"string"!=typeof e&&(e=String(e)),this.reset();const n=this.$(e,!0);if(n>0){let e=this.value();if(void 0===e&&n>1)throw new Error("Pending value could not complete");return e="function"==typeof t?function e(n,r){let i,a,s=n[r];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a=e(s,i),void 0!==a?s[i]=a:delete s[i]);return t.call(n,r,s)}({T:e},""):e,e}this.A()},$(n,r){let X,te,ne,re=0;function ie(e,t){throw new Error(`${e} '${String.fromCodePoint(t)}' unexpected at ${w} (near '${ne.substr(w>4?w-4:0,w>4?3:w-1)}[${String.fromCodePoint(t)}]${ne.substr(w,10)}') [${f.line}:${f.m}]`)}function ae(){o.k=0,o.string="",o.contains=null}function se(){let t=null;switch(o.k){case 5:if(!(o.string.length>13||13==o.string.length&&o[0]>"2")||z||P||F||U||(ee=!0),ee){if(e)return BigInt(o.string);throw new Error("no builtin BigInt()",0)}if(z){const e=o.string.match(/\.(\d\d\d\d*)/),t=e?e[1]:null;if(!t||t.length<4){const e=new Date(o.string);return isNaN(e.getTime())&&ie("Bad Date format",X),e}{let e=t.substr(3);for(;e.length<6;)e+="0";const n=new c(o.string,Number(e));return isNaN(n.getTime())&&ie("Bad DateNS format"+n+n.getTime(),X),n}}return(x?-1:1)*Number(o.string);case 4:if(o.className){if(t=m.get(o.className),t||(t=k.get(o.className)),t&&t.X)return o.className=null,t.X.call(o.string);throw new Error("Double string error, no constructor for: new "+o.className+"("+o.string+")")}return o.string;case 2:return!0;case 3:return!1;case 7:case 8:return NaN;case 9:return-1/0;case 10:return 1/0;case 1:return null;case-1:case 12:return;case 6:return o.className&&(t=m.get(o.className),t||(t=k.get(o.className)),o.className=null,t&&t.X)?o.contains=t.X.call(o.contains):o.contains;case 13:if($>=0){let e;if(e=o.contains.length?v(o.contains[0]):v(o.string),0===$)return $=-1,e;{const t=new i[$](e);return $=-1,t}}if(-2===$){let e,t=E;const n=o.contains.length;for(e=0;e<n;e++){const r=o.contains[e];let i=t[r];if(!i){let r=N.O,a=0;for(;r&&a<n&&a<N.length;){const n=o.contains[a];if(!r.next||n!==r.next.node.name)break;if(r.next)if("number"==typeof n){const e=r.next.node.elements;if(e&&n>=e.length){if(a===N.length-1){console.log("This is actually at the current object so use that",a,o.contains,g),i=g,a++,r=r.next;break}if(r.next.next&&n===e.length){i=r.next.next.node.elements,r=r.next,a++,t=i;continue}i=g,a++;break}}else{if(n!==r.next.node.name){i=r.next.node.elements[n],e=a;break}i=r.next.next?r.next.next.node.elements:g}else i=i[n];r=r.next,a++}e=a<n?a-1:a}if("object"==typeof i&&!i)throw new Error("Path did not resolve properly:"+o.contains+" at "+r+"("+e+")");t=i}return $=-3,t}return o.className&&(t=m.get(o.className),t||(t=k.get(o.className)),o.className=null,t&&t.X)?t.X.call(o.contains):o.contains;default:console.log("Unhandled value conversion.",o)}}function le(){if(-3==$)return 6===o.k&&g.push(o.contains),void($=-1);if(12===o.k)g.push(void 0),delete g[g.length-1];else g.push(se());ae()}function oe(){if(-3===$&&13===o.k)return ae(),void($=-1);if(12===o.k)return;!o.name&&A&&(o.name=A.B[M++]);let e=se();I&&I.C&&I.C.X?(e=I.C.X.call(g,o.name,e),e&&(g[o.name]=e)):g[o.name]=e,ae()}function ce(e){if(0!==y){switch(x&&ie("Negative outside of quotes, being converted to a string (would lose count of leading '-' characters)",e),y){case l:switch(o.k){case 2:o.string+="true";break;case 3:o.string+="false";break;case 1:o.string+="null";break;case 10:o.string+="Infinity";break;case 9:o.string+="-Infinity",ie("Negative outside of quotes, being converted to a string",e);break;case 8:o.string+="NaN";break;case 7:o.string+="-NaN",ie("Negative outside of quotes, being converted to a string",e);break;case-1:o.string+="undefined";break;case 4:case 0:break;default:console.log("Value of type "+o.k+" is not restored...")}break;case 1:o.string+="t";break;case 2:o.string+="tr";break;case 3:o.string+="tru";break;case 5:o.string+="f";break;case 6:o.string+="fa";break;case 7:o.string+="fal";break;case 8:o.string+="fals";break;case 9:o.string+="n";break;case 10:o.string+="nu";break;case 11:o.string+="nul";break;case 12:o.string+="u";break;case 13:o.string+="un";break;case 14:o.string+="und";break;case 15:o.string+="unde";break;case 16:o.string+="undef";break;case 17:o.string+="undefi";break;case 18:o.string+="undefin";break;case 19:o.string+="undefine";break;case 20:o.string+="N";break;case 21:o.string+="Na";break;case 22:o.string+="I";break;case 23:o.string+="In";break;case 24:o.string+="Inf";break;case 25:o.string+="Infi";break;case 26:o.string+="Infin";break;case 27:o.string+="Infini";break;case 28:o.string+="Infinit";break;case 0:case a:case s:break;case 32:ie("String-keyword recovery fail (after whitespace)",e)}o.k=4,y<a&&(y=l)}else y=l,o.k=4;if(123==e)be();else if(91==e)he();else if(44==e);else{if(32==e||13==e||10==e||9==e||65279==e||8232==e||8233==e)return;44==e||125==e||93==e||58==e||(o.string+=d)}}function fe(e){let t=0;for(;0==t&&w<ne.length;){d=ne.charAt(w);let n=ne.codePointAt(w++);if(n>=65536&&(d+=ne.charAt(w),w++),f.m++,n==e)H?(K?ie("Incomplete hexidecimal sequence",n):V?ie("Incomplete long unicode sequence",n):L&&ie("Incomplete unicode sequence",n),G?(G=!1,t=1):o.string+=d,H=!1):t=1;else if(H){if(L){if(125==n){o.string+=String.fromCodePoint(Q),L=!1,V=!1,H=!1;continue}if(Q*=16,n>=48&&n<=57)Q+=n-48;else if(n>=65&&n<=70)Q+=n-65+10;else{if(!(n>=97&&n<=102)){ie("(escaped character, parsing hex of \\u)",n),t=-1,L=!1,H=!1;continue}Q+=n-97+10}continue}if(K||V){if(0===Y&&123===n){L=!0;continue}if(Y<2||V&&Y<4){if(Q*=16,n>=48&&n<=57)Q+=n-48;else if(n>=65&&n<=70)Q+=n-65+10;else{if(!(n>=97&&n<=102)){ie(V?"(escaped character, parsing hex of \\u)":"(escaped character, parsing hex of \\x)",n),t=-1,K=!1,H=!1;continue}Q+=n-97+10}Y++,V?4==Y&&(o.string+=String.fromCodePoint(Q),V=!1,H=!1):2==Y&&(o.string+=String.fromCodePoint(Q),K=!1,H=!1);continue}}switch(n){case 13:G=!0,f.m=1;continue;case 8232:case 8233:f.m=1;case 10:G?G=!1:f.m=1,f.line++;break;case 116:o.string+="\t";break;case 98:o.string+="\b";break;case 110:o.string+="\n";break;case 114:o.string+="\r";break;case 102:o.string+="\f";break;case 118:o.string+="\v";break;case 48:o.string+="\0";break;case 120:K=!0,Y=0,Q=0;continue;case 117:V=!0,Y=0,Q=0;continue;default:o.string+=d}H=!1}else 92===n?H?(o.string+="\\",H=!1):(H=!0,Q=0,Y=0):(G&&(G=!1,f.line++,f.m=2),o.string+=d)}return t}function ue(){let e;for(;(e=w)<ne.length;){d=ne.charAt(e);let t=ne.codePointAt(w++);if(t>=256){f.m-=w-e,w=e;break}if(95!=t)if(f.m++,t>=48&&t<=57)D&&(P=!0),o.string+=d;else if(45==t||43==t)0==o.string.length||D&&!F&&!P?(45!=t||D||(x=!x),o.string+=d,F=!0):(x&&(o.string="-"+o.string,x=!1),o.string+=d,z=!0);else{if(78==t){if(0==y)return W=!1,void(y=20);ie("fault while parsing number;",t);break}if(73==t){if(0==y)return W=!1,void(y=22);ie("fault while parsing number;",t);break}if(58==t&&z)x&&(o.string="-"+o.string,x=!1),o.string+=d,z=!0;else if(84==t&&z)x&&(o.string="-"+o.string,x=!1),o.string+=d,z=!0;else if(90==t&&z)x&&(o.string="-"+o.string,x=!1),o.string+=d,z=!0;else if(46==t){if(U||C||D){O=!1,ie("fault while parsing number;",t);break}o.string+=d,U=!0}else{if(110==t){ee=!0;break}if(C&&(t>=95&&t<=102||t>=65&&t<=70))o.string+=d;else if(120==t||98==t||111==t||88==t||66==t||79==t){if(C||"0"!=o.string){O=!1,ie("fault while parsing number;",t);break}C=!0,o.string+=d}else{if(101!=t&&69!=t){if(32==t||13==t||10==t||9==t||47==t||35==t||44==t||125==t||93==t||123==t||91==t||34==t||39==t||96==t||58==t){f.m-=w-e,w=e;break}r&&(O=!1,ie("fault while parsing number;",t));break}if(D){O=!1,ie("fault while parsing number;",t);break}o.string+=d,D=!0}}}}r||w!=ne.length?(W=!1,o.k=5,0==T&&(Z=!0)):W=!0}function be(){let e,t=2,n=null,r={};if(y>0&&y<a&&ce(123),e=pe(),0==T)if(y==a||y==l&&(e||o.string.length)){if(e&&e.C&&e.C.J&&(r=new e.C.J),!e||!e.C&&o.string){if(n=J.find((e=>e.name===o.string)),n)S?(n.B.length=0,t=4):(r=new n.J,t=5);else{function s(){}J.push(n={name:o.string,J:e&&e.C&&e.C.J||s.constructor,B:[]}),t=4}S=!1}A=n,y=0}else y=a;else if(y==a||1===T||3===T||5==T)if(0!=y||4==o.k){if(e&&e.C)r=new e.C.J;else if(n=J.find((e=>e.name===o.string)),n)t=5,r={};else{function c(){}m.set(o.string,{J:c.prototype.constructor,X:null}),r=new c}y=0}else y=0;else if(2==T&&0==y)return ie("fault while parsing; getting field name unexpected ",X),O=!1,!1;let i=u();return o.k=6,0===T?g=r:1==T?o.name=g.length:3!=T&&5!=T||(!o.name&&A&&(o.name=A.B[M++]),g[o.name]=r),i.context=T,i.elements=g,i.name=o.name,i.l=I,i.o=A,i.u=M,i.valueType=o.k,i.h=$,i.className=o.className,o.className=null,o.name=null,I=e,A=n,M=0,g=r,E||(E=g),N.push(i),ae(),T=t,!0}function he(){if(y>0&&y<a&&ce(91),y==l&&o.string.length){let e=t.findIndex((e=>e===o.string));y=0,e>=0?($=e,o.className=o.string,o.string=null):"ref"===o.string?(o.className=null,$=-2):m.get(o.string)||k.get(o.string)?o.className=o.string:ie(`Unknown type '${o.string}' specified for array`,X)}else if(2==T||y==a||y==s)return ie("Fault while parsing; while getting field name unexpected",X),O=!1,!1;{let e=u();o.k=13;let t=[];if(0==T)g=t;else if(1==T)-1==$&&g.push(t),o.name=g.length;else if(3==T)if(o.name||(console.log("This says it's resolved......."),$=-3),I&&I.C)if(I.C.X){const e=I.C.X.call(g,o.name,t);void 0!==e&&(t=g[o.name]=e)}else g[o.name]=t;else g[o.name]=t;e.context=T,e.elements=g,e.name=o.name,e.l=I,e.o=A,e.u=M,e.valueType=o.k,e.h=-1==$?-3:$,e.className=o.className,$=-1,o.className=null,o.name=null,I=null,A=null,M=0,g=t,E||(E=t),N.push(e),ae(),T=1}return!0}function pe(){const e={C:null,U:null};return((e.C=m.get(o.string))||(e.C=k.get(o.string)))&&(o.className||(o.className=o.string,o.string=null)),o.string&&(e.U=J.find((e=>e.name===o.string)),!e.C&&e.U),e.C||e.U?e:null}if(!O)return-1;for(n&&n.length?(te=function(){let e=h.pop();return e?e.n=0:e={D:null,n:0},e}(),te.D=n,_.push(te)):(W&&(W=!1,o.k=5,0==T&&(Z=!0),re=1),0!==T&&ie("Unclosed object at end of stream.",X));O&&(te=_.shift());){if(w=te.n,ne=te.D,R){let e=fe(q);e<0?O=!1:e>0&&(R=!1,O&&(o.k=4))}for(W&&ue();!Z&&O&&w<ne.length;)if(d=ne.charAt(w),X=ne.codePointAt(w++),X>=65536&&(d+=ne.charAt(w),w++),f.m++,B)if(1==B)if(42==X)B=3;else{if(47!=X)return ie("fault while parsing;",X);B=2}else 2==B?10!=X&&13!=X||(B=0):3==B?42==X&&(B=4):B=47==X?0:3;else{switch(X){case 35:B=2;break;case 47:B=1;break;case 123:be();break;case 91:he();break;case 58:if(5==T)y=0,o.name=o.string,o.string="",o.k=0;else if(2==T||4==T)if(4==T){if(!Object.keys(g).length){console.log("This is a full object, not a class def...",o.className);const e=()=>{};m.set(N.S.node.o.name,{J:e.prototype.constructor,X:null}),g=new e,T=3,o.name=o.string,y=0,o.string="",o.k=0,console.log("don't do default;s do a revive...")}}else 0!=y&&y!=l&&y!=a&&y!=s&&ce(32),y=0,o.name=o.string,o.string="",T=2===T?3:6,o.k=0;else{if(0==T){console.log("Override colon found, allow class redefinition",T),S=!0;break}ie(1==T?"(in array, got colon out of string):parsing fault;":3==T?"String unexpected":"(outside any object, got colon out of string):parsing fault;",X),O=!1}break;case 125:if(y==l&&(y=0),4==T)if(A){o.string&&A.B.push(o.string),ae();let e=N.pop();T=0,y=0,o.name=e.name,g=e.elements,A=e.o,M=e.u,$=e.h,o.k=e.valueType,o.className=e.className,E=null,b(e)}else ie("State error; gathering class fields, and lost the class",X);else if(2==T||5==T){0!=o.k&&(A&&(o.name=A.B[M++]),oe()),o.k=6,I&&I.C&&(console.log("SOMETHING SHOULD AHVE BEEN REPLACED HERE??",I),console.log("The other version only revives on init"),g=new I.C.X(g,void 0,void 0)),o.contains=g,o.string="";let e=N.pop();T=e.context,o.name=e.name,g=e.elements,A=e.o,I=e.l,M=e.u,$=e.h,o.k=e.valueType,o.className=e.className,b(e),0==T&&(Z=!0)}else if(3==T){0===o.k&&(0==y?ie("Fault while parsing; unexpected",X):ce(X)),oe(),o.k=6,o.contains=g,y=0;let e=N.pop();T=e.context,o.name=e.name,g=e.elements,I=e.l,A=e.o,M=e.u,$=e.h,o.k=e.valueType,o.className=e.className,b(e),0==T&&(Z=!0)}else ie("Fault while parsing; unexpected",X),O=!1;x=!1;break;case 93:if(y>=s&&(y=0),1==T){0!=o.k&&le(),o.contains=g;{let e=N.pop();o.name=e.name,o.className=e.className,T=e.context,g=e.elements,I=e.l,A=e.o,M=e.u,$=e.h,o.k=e.valueType,b(e)}o.k=13,0==T&&(Z=!0)}else ie(`bad context ${T}; fault while parsing`,X),O=!1;x=!1;break;case 44:y<s&&0!=y&&ce(X),y!=l&&y!=a||(y=0),4==T?A?(A.B.push(o.string),o.string="",y=a):ie("State error; gathering class fields, and lost the class",X):2==T?A?(o.name=A.B[M++],0!=o.k&&(oe(),ae())):(o.string||o.k)&&ie("State error; comma in field name and/or lost the class",X):5==T?(A?(-3==$||o.name||(o.name=A.B[M++]),0!=o.k&&(-3!=$&&oe(),ae())):0!=o.k&&(oe(),ae()),o.name=null):1==T?(0==o.k&&(o.k=12),le(),ae(),y=0):3==T&&0!=o.k?(T=2,0!=o.k&&(oe(),ae()),y=0):(O=!1,ie("bad context; excessive commas while parsing;",X)),x=!1;break;default:switch(X){default:if(0!=T&&(3!=T||y!=a)&&2!=T&&y!=a&&4!=T){if(0==y&&(X>=48&&X<=57||43==X||46==X||45==X))C=!1,D=!1,z=!1,ee=!1,F=!1,P=!1,U=!1,o.string=d,te.n=w,ue();else if(0==o.k)0!=y?ce(X):(y=l,o.string+=d,o.k=4);else if(2==T)ie("Multiple values found in field name",X);else if(3==T)if(4!=o.k&&(6!=o.k&&13!=o.k||ie("String unexpected",X),ce(X)),y==s){pe()?o.string=d:ie("String unexpected",X)}else y==l?o.string+=d:ie("String unexpected",X);else if(1==T){if(y==s){o.className||(o.className=o.string,o.string=""),o.string+=d;break}y==l&&(o.string+=d)}break}switch(X){case 96:case 34:case 39:if(0==y||y==a){o.string.length&&(console.log("IN ARRAY AND FIXING?"),o.className=o.string,o.string=""),fe(X)?o.k=4:(q=X,R=!0)}else ie("fault while parsing; quote not at start of field name",X);break;case 10:f.line++,f.m=1;case 13:case 32:case 8232:case 8233:case 9:case 65279:if(0===T&&y===l){y=0,0===T&&(Z=!0);break}if(0===y||y===s){0==T&&o.k&&(Z=!0);break}if(y===a){if(0===T){y=0,Z=!0;break}o.string.length&&console.log("STEP TO NEXT TOKEN."),y=s}else O=!1,ie("fault while parsing; whitepsace unexpected",X);break;default:if(0==y&&(X>=48&&X<=57||43==X||46==X||45==X)){C=!1,D=!1,z=!1,ee=!1,F=!1,P=!1,U=!1,o.string=d,te.n=w,ue();break}if(y===s&&(O=!1,ie("fault while parsing; character unexpected",X)),0===y){y=a,o.k=4,o.string+=d;break}if(0==o.k)0!==y&&y!==l&&ce(X);else{if(y===l||y===a){o.string+=d;break}if(2==T){if(y==a){o.string+=d;break}ie("Multiple values found in field name",X)}3==T&&ie("String unexpected",X)}}break;case 96:case 34:case 39:o.string&&(o.className=o.string),o.string="",fe(X)?(o.k=4,y=l):(q=X,R=!0);break;case 10:f.line++,f.m=1;case 32:case 9:case 13:case 8232:case 8233:case 65279:if(y==l){if(0==T){y=0,Z=!0;break}if(3==T){y=32;break}if(2==T){y=s;break}if(1==T){y=s;break}}if(0==y||y==s)break;y==a?o.string.length&&(y=s):y<l&&ce(X);break;case 116:0==y?y=1:27==y?y=28:ce(X);break;case 114:1==y?y=2:ce(X);break;case 117:2==y?y=3:9==y?y=10:0==y?y=12:ce(X);break;case 101:3==y?(o.k=2,y=l):8==y?(o.k=3,y=l):14==y?y=15:18==y?y=19:ce(X);break;case 110:0==y?y=9:12==y?y=13:17==y?y=18:22==y?y=23:25==y?y=26:ce(X);break;case 100:13==y?y=14:19==y?(o.k=-1,y=l):ce(X);break;case 105:16==y?y=17:24==y?y=25:26==y?y=27:ce(X);break;case 108:10==y?y=11:11==y?(o.k=1,y=l):6==y?y=7:ce(X);break;case 102:0==y?y=5:15==y?y=16:23==y?y=24:ce(X);break;case 97:5==y?y=6:20==y?y=21:ce(X);break;case 115:7==y?y=8:ce(X);break;case 73:0==y?y=22:ce(X);break;case 78:0==y?y=20:21==y?(o.k=x?7:8,x=!1,y=l):ce(X);break;case 121:28==y?(o.k=x?9:10,x=!1,y=l):ce(X);break;case 45:0==y?x=!x:ce(X);break;case 43:0!==y&&ce(X)}}if(Z){y==l&&(y=0);break}}if(w==ne.length?(p(te),R||W||2==T?re=0:0!=T||0==o.k&&!j||(Z=!0,re=1)):(te.n=w,_.unshift(te),re=2),Z){E=null;break}}return O?(Z&&0!=o.k&&(y=0,j=se(),x=!1,o.string="",o.k=0),Z=!1,re):-1}}};const m=[Object.freeze(JSOX.begin())];let y=0;function O(){return this&&this.valueOf()}JSOX.parse=function(e,t){let n,r=y++;m.length<=r&&m.push(Object.freeze(JSOX.begin())),n=m[r],"string"!=typeof e&&(e=String(e)),n.reset();const i=n.$(e,!0);if(i>0){let e=n.value();if(void 0===e&&i>1)throw new Error("Pending value could not complete");return e="function"==typeof t?function e(n,r){let i,a,s=n[r];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a=e(s,i),void 0!==a?s[i]=a:delete s[i]);return t.call(n,r,s)}({T:e},""):e,y--,e}n.A()},JSOX.F=function(e,t){let n,r=Object.keys(t);for(let e=1;e<r.length;e++){let t,n;(t=r[e-1])>(n=r[e])&&(r[e-1]=n,r[e]=t,e?e-=2:e--)}w.push(n={name:e,tag:r.toString(),P:Object.getPrototypeOf(t),B:Object.keys(t)});for(let e=1;e<n.B.length;e++)if(n.B[e]<n.B[e-1]){let t=n.B[e-1];n.B[e-1]=n.B[e],n.B[e]=t,e>1&&(e-=2)}n.P===Object.getPrototypeOf({})&&(n.P=null)},JSOX._=JSOX.q=function(e,t,n){if(t.prototype&&t.prototype===Object.prototype){let r=Object.keys(t).toString();if(g.get(r))throw new Error("Existing toJSOX has been registered for object type");g.set(r,{external:!0,name:e,X:n})}else{if(d.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");d.set(t.prototype,{external:!0,name:e||n.constructor.name,X:n})}},JSOX.N=function(e,t,n){if(t||(t=function(){}.prototype),k.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");k.set(e,{J:t.prototype.constructor,X:n})},JSOX.I=function(e,t){throw new Error("deprecated; please adjust code to use fromJSOX:"+e+t.toString())},JSOX.R=function(e,t,n,r){JSOX._(e,t,n),JSOX.N(e,t,r)},JSOX.W=function(e,t){throw new Error("registerToFrom deprecated; please use addType:"+e+t.toString())},JSOX.H=function(){let e=[],t='"',i=new WeakMap;const a=[];let s=[];const l=new WeakMap,f=new Map;let u=null;const b=[];let h=!1;function p(e){return"string"==typeof e&&""===e?'""':"number"!=typeof e||isNaN(e)?e.includes("\ufeff")||e in o||/[0-9\-]/.test(e[0])||/[\n\r\t #\[\]{}()<>\~!+*/.:,\-"'`]/.test(e)?t+JSOX.escape(e)+t:e:["'",e.toString(),"'"].join("")}d.get(Object.prototype)||(d.set(Object.prototype,{external:!1,name:Object.prototype.constructor.name,X:null}),d.set(Date.prototype,{external:!1,name:"Date",X:function(){if(-621672192e5===this.getTime())return"0000-01-01T00:00:00.000Z";let e=-this.getTimezoneOffset(),t=e>=0?"+":"-",n=function(e){let t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return[this.getFullYear(),"-",n(this.getMonth()+1),"-",n(this.getDate()),"T",n(this.getHours()),":",n(this.getMinutes()),":",n(this.getSeconds()),"."+function(e){let t=Math.floor(Math.abs(e));return(t<100?"0":"")+(t<10?"0":"")+t}(this.getMilliseconds())+t,n(e/60),":",n(e%60)].join("")}}),d.set(c.prototype,{external:!1,name:"DateNS",X:function(){let e=-this.getTimezoneOffset(),t=e>=0?"+":"-",n=function(e){let t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return[this.getFullYear(),"-",n(this.getMonth()+1),"-",n(this.getDate()),"T",n(this.getHours()),":",n(this.getMinutes()),":",n(this.getSeconds()),"."+function(e){let t=Math.floor(Math.abs(e));return(t<100?"0":"")+(t<10?"0":"")+t}(this.getMilliseconds())+function(e){let t=Math.floor(Math.abs(e));return(t<1e5?"0":"")+(t<1e4?"0":"")+(t<1e3?"0":"")+(t<100?"0":"")+(t<10?"0":"")+t}(this.t)+t,n(e/60),":",n(e%60)].join("")}}),d.set(Boolean.prototype,{external:!1,name:"Boolean",X:O}),d.set(Number.prototype,{external:!1,name:"Number",X:function(){return isNaN(this)?"NaN":isFinite(this)?String(this):this<0?"-Infinity":"Infinity"}}),d.set(String.prototype,{external:!1,name:"String",X:function(){return'"'+JSOX.escape(O.apply(this))+'"'}}),"function"==typeof BigInt&&d.set(BigInt.prototype,{external:!1,name:"BigInt",X:function(){return this+"n"}}),d.set(ArrayBuffer.prototype,{external:!0,name:"ab",X:function(){return"["+p(j(this))+"]"}}),d.set(Uint8Array.prototype,{external:!0,name:"u8",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Uint8ClampedArray.prototype,{external:!0,name:"uc8",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Int8Array.prototype,{external:!0,name:"s8",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Uint16Array.prototype,{external:!0,name:"u16",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Int16Array.prototype,{external:!0,name:"s16",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Uint32Array.prototype,{external:!0,name:"u32",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Int32Array.prototype,{external:!0,name:"s32",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Float32Array.prototype,{external:!0,name:"f32",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Float64Array.prototype,{external:!0,name:"f64",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(Float64Array.prototype,{external:!0,name:"f64",X:function(){return"["+p(j(this.buffer))+"]"}}),d.set(RegExp.prototype,r={external:!0,name:"regex",X:function(e,t){return"'"+escape(this.source)+"'"}}),k.set("regex",{J:RegExp,X:function(e,t){return new RegExp(this)}}),d.set(Map.prototype,r={external:!0,name:"map",X:null}),k.set("map",{J:Map,X:function(e,t){if(!e)return this;this.set(e,t)}}),d.set(Array.prototype,n={external:!1,name:Array.prototype.constructor.name,X:null}));const m={F(t,n){let r,i=Object.keys(n);for(let e=1;e<i.length;e++){let t,n;(t=i[e-1])>(n=i[e])&&(i[e-1]=n,i[e]=t,e?e-=2:e--)}e.push(r={name:t,tag:i.toString(),P:Object.getPrototypeOf(n),B:Object.keys(n)});for(let e=1;e<r.B.length;e++)if(r.B[e]<r.B[e-1]){let t=r.B[e-1];r.B[e-1]=r.B[e],r.B[e]=t,e>1&&(e-=2)}r.P===Object.getPrototypeOf({})&&(r.P=null)},G(e){u=e},L:e=>!!s.find(((t,n)=>t===e&&n<s.length-1)),V(e){return u?u.apply(e,[this]):e},stringify:(t,o,c)=>function(t,o,c){if(void 0===t)return"undefined";if(null===t)return;let k,O,x,j;const v=typeof c,E=typeof o;if(k="",O="","number"===v)for(j=0;j<c;j+=1)O+=" ";else"string"===v&&(O=c);if(x=o,o&&"function"!==E&&("object"!==E||"number"!=typeof o.length))throw new Error("JSOX.stringify");a.length=0,i=new WeakMap;const N=J("",{T:t});return w.length=0,N;function J(t,i){var o=k;const c=n.X,j=r.X;n.X=E,r.X=N;const v=X(t,i);return n.X=c,r.X=j,v;function E(){let e,t=[],n=a.length;for(let e=0;e<this.length;e+=1)a[n]=e,t[e]=J(e,this)||"null";return a.length=n,s.length=n,e=0===t.length?"[]":k?["[\n",k,t.join(",\n"+k),"\n",o,"]"].join(""):"["+t.join(",")+"]",e}function N(){let e={K:null},t="{",n=!0;for(let[r,i]of this){e.K=i;let s=a.length;a[s]=r,t+=(n?"":",")+p(r)+":"+J("tmp",e),a.length=s,n=!1}return t+="}",t}function X(t,n){let r,i,c,j,v,E,N,X=a.length,I=!0,A=n[t],M="object"==typeof A;M&&null!==A&&u&&(b.find((e=>e===A))||(b.push(A),s[X]=A,I=!1,A=u.apply(A,[m]),M="object"==typeof A,b.pop(),s.length=X,M="object"==typeof A));const $=null!=A&&Object.getPrototypeOf(A);let T=$&&(l.get($)||d.get($)||null),B=!T&&null!=A&&(f.get(Object.keys(A).toString())||g.get(Object.keys(A).toString())||null);"function"==typeof x&&(I=!1,A=x.call(n,t,A));let C=T&&T.X||B&&B.X;if(null!=A&&"object"==typeof A&&"function"==typeof C)if(b.find((e=>e===A)))c=y(A);else{if("object"==typeof A&&(c=y(A),c))return c;b.push(A),s[X]=A,A=C.call(A,m),I=!1,b.pop(),T&&T.name&&"string"==typeof A&&"-"!==A[0]&&(A[0]<"0"||A[0]>"9")&&'"'!==A[0]&&"'"!==A[0]&&"`"!==A[0]&&"["!==A[0]&&"{"!==A[0]&&(A=" "+A),s.length=X}else if("object"==typeof A&&(c=y(A),c))return c;switch(typeof A){case"bigint":return A+"n";case"string":{A=I?p(A):A;let n="";return""===t&&(n=e.map((e=>e.name+"{"+e.B.join(",")+"}")).join(k?"\n":"")+w.map((e=>e.name+"{"+e.B.join(",")+"}")).join(k?"\n":"")+(k?"\n":"")),T&&T.external?n+T.name+A:B&&B.external?n+B.name+A:n+A}case"number":case"boolean":case"null":return String(A);case"object":if(c)return"ref"+c;if(!A)return"null";if(k+=O,v=null,E=[],x&&"object"==typeof x){for(j=x.length,v=S(A,x),r=0;r<j;r+=1)"string"==typeof x[r]&&(i=x[r],a[X]=i,c=J(i,A),void 0!==c&&(v?E.push(c):E.push(p(i)+(k?": ":":")+c)));a.splice(X,1)}else{v=S(A);let e=[];for(i in A)if((!h||Object.prototype.propertyIsEnumerable.call(A,i))&&Object.prototype.hasOwnProperty.call(A,i)){let t;for(t=0;t<e.length;t++)if(e[t]>i){e.splice(t,0,i);break}t==e.length&&e.push(i)}for(let t=0;t<e.length;t++)i=e[t],Object.prototype.hasOwnProperty.call(A,i)&&(a[X]=i,c=J(i,A),void 0!==c&&(v?E.push(c):E.push(p(i)+(k?": ":":")+c)));a.splice(X,1)}N=""===t?(e.map((e=>e.name+"{"+e.B.join(",")+"}")).join(k?"\n":"")||w.map((e=>e.name+"{"+e.B.join(",")+"}")).join(k?"\n":""))+(k?"\n":""):"",T&&T.external&&(N+=p(T.name));let n=null;return v&&(n=p(v.name)),c=N+(0===E.length?"{}":k?(v?n:"")+"{\n"+k+E.join(",\n"+k)+"\n"+o+"}":(v?n:"")+"{"+E.join(",")+"}"),k=o,c}}}}(t,o,c),Y(e){t=e},q(e,t,n){return this._(e,t,n)},_(e,t,n){if(t.prototype&&t.prototype!==Object.prototype){if(l.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");l.set(t.prototype,{external:!0,name:e||n.constructor.name,X:n})}else{let r=Object.keys(t).toString();if(f.get(r))throw new Error("Existing toJSOX has been registered for object type");f.set(r,{external:!0,name:e,X:n})}},get Z(){return h},set Z(e){h=e}};return m;function y(e){if(null===e)return;let t=i.get(e);if(t)return"ref"+t;i.set(e,_JSON.stringify(a))}function S(t,n){let r,i,a=Object.getPrototypeOf(t);if(i=e.find((e=>{if(e.P&&e.P===a)return!0})),i)return i;if(e.length||w.length){if(n)n=n.map((e=>"string"==typeof e?e:void 0)),r=n.toString();else{let e=Object.keys(t);for(let t=1;t<e.length;t++){let n,r;(n=e[t-1])>(r=e[t])&&(e[t-1]=r,e[t]=n,t?t-=2:t--)}r=e.toString()}i=e.find((e=>{if(e.tag===r)return!0})),i||(i=w.find((e=>{if(e.tag===r)return!0})))}return i}};const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_",x={ee:-1,te:-1,ne:62,re:63,ie:62,ae:62,se:62,le:63,oe:63};for(let e=0;e<S.length;e++)x[S[e]]=e;function j(e){let t,n,r,i,a,s="",l=new Uint8Array(e),o=l.byteLength,c=o%3,f=o-c;for(let e=0;e<f;e+=3)a=l[e]<<16|l[e+1]<<8|l[e+2],t=(16515072&a)>>18,n=(258048&a)>>12,r=(4032&a)>>6,i=63&a,s+=S[t]+S[n]+S[r]+S[i];return 1==c?(a=l[f],t=(252&a)>>2,n=(3&a)<<4,s+=S[t]+S[n]+"=="):2==c&&(a=l[f]<<8|l[f+1],t=(64512&a)>>10,n=(1008&a)>>4,r=(15&a)<<2,s+=S[t]+S[n]+S[r]+"="),s}function v(e){let t;t=e.length%4==1?3*((e.length+3)/4|0)-3:e.length%4==2?3*((e.length+3)/4|0)-2:e.length%4==3?3*((e.length+3)/4|0)-1:-1==x[e[e.length-3]]?3*((e.length+3)/4|0)-3:-1==x[e[e.length-2]]?3*((e.length+3)/4|0)-2:-1==x[e[e.length-1]]?3*((e.length+3)/4|0)-1:3*((e.length+3)/4|0);let n,r=new ArrayBuffer(t),i=new Uint8Array(r),a=e.length+3>>2;for(n=0;n<a;n++){let t=x[e[4*n]],r=4*n+1<e.length?x[e[4*n+1]]:-1,a=r>=0&&4*n+2<e.length?x[e[4*n+2]]:-1,s=a>=0&&4*n+3<e.length?x[e[4*n+3]]:-1;r>=0&&(i[3*n+0]=t<<2|r>>4),a>=0&&(i[3*n+1]=r<<4|a>>2&15),s>=0&&(i[3*n+2]=a<<6|63&s)}return r}Object.freeze(x),JSOX.stringify=function(e,t,n){return JSOX.H().stringify(e,t,n)},[[0,256,[16767487,16739071,130048,3670016,0,16777208,16777215,8388607]]].map((e=>({ce:e[0],fe:e[1],ue:e[2]})))}();
